model:
  init_args:
    model:
      init_args:
        encoder:
          - class_path: rslearn.models.simple_time_series.SimpleTimeSeries
            init_args:
              encoder:
                  class_path: rslearn.models.copernicus_fm.CopernicusFM
                  init_args:
                    band_order:
                      sentinel2_l2a: ["B02", "B03", "B04", "B05", "B06", "B07", "B08", "B8A", "B11", "B12"] # Must match the loaded band order
              image_channels: 10
              image_key: "sentinel2_l2a"
        decoders:
          segment:
            - class_path: rslearn.models.unet.UNetDecoder
              init_args:
                in_channels: [[28, 768]] #
                out_channels: 20
                conv_layers_per_resolution: 2
                num_channels: {14: 512, 7: 512, 3: 256, 1: 128}
                original_size_to_interpolate: [128, 128]
            - class_path: rslearn.train.tasks.segmentation.SegmentationHead
data:
  init_args:
    inputs:
      sentinel2_l2a:
        data_type: "raster"
        layers: ["sentinel2"]
        # PASTIS is missing B01 and B09.
        # We don't need to fill in because panopticon is flexible enough to handle this.
        bands: ["B02", "B03", "B04", "B05", "B06", "B07", "B08", "B8A",  "B11", "B12"]
        passthrough: true
      targets:
        data_type: "raster"
        layers: ["label"]
        bands: ["class"]
        is_target: true
    default_config:
      transforms:
        - class_path: rslearn.train.transforms.concatenate.Concatenate
          init_args:
            selections:
              # PASTIS is missing B01 and B09.
              # We just leave them out?
              sentinel2_l2a: []
            output_selector: sentinel2_l2a
    train_config:
      transforms:
        - class_path: rslearn.train.transforms.concatenate.Concatenate
          init_args:
            selections:
              # PASTIS is missing B01 and B09.
              # We use B02 to fill in B01 and B8A to fill in B09.
              sentinel2_l2a: []
            output_selector: sentinel2_l2a
        - class_path: rslearn.train.transforms.flip.Flip
          init_args:
            image_selectors: ["sentinel2_l2a", "target/segment/classes", "target/segment/valid"]
rslp_project: copernicusfm_finetune_test
rslp_experiment: copernicusfm_finetune_test1