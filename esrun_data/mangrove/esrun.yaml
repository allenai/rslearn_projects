partition_strategies:
  partition_request_geometry:
    class_path: esrun.runner.tools.partitioners.grid_partitioner.GridPartitioner
    init_args:
      grid_size: .1 # Lat lon degrees, a random guess not sure what is really reasonable
      output_projection:
        class_path: rslearn.utils.geometry.Projection
        init_args:
          crs: EPSG:3857
          x_resolution: 10
          y_resolution: -10
      use_utm: true

  prepare_window_geometries:
    class_path: esrun.runner.tools.partitioners.grid_partitioner.GridPartitioner
    init_args:
      grid_size: 32 # 32 based on the window creation script yawen made
      output_projection:
        class_path: rslearn.utils.geometry.Projection
        init_args:
          crs: EPSG:3857
          x_resolution: 10
          y_resolution: -10
      use_utm: true

postprocessing_strategies:
  process_dataset:
    class_path: esrun.runner.tools.postprocessors.combine_geotiff.CombineGeotiff

  process_partition:
    class_path: esrun.runner.tools.postprocessors.combine_geotiff.CombineGeotiff

  process_window:
    class_path: esrun.runner.tools.postprocessors.noop_raster.NoopRaster


inference_results_config:
  data_type: RASTER


inference_writer:
  selector: ["mangrove_classification"]
  merger:
    class_path: rslearn.train.prediction_writer.RasterMerger
    init_args:
      padding: 2